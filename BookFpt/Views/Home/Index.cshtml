@model IEnumerable<BookFpt.ViewModels.BookVM>
@using BookFpt.Helpers

@{
	ViewData["Title"] = "Home Page";
}

<div class="text-center">
	<section class="py-5">
		<form class="form search" asp-action="Search" style="text-align: end; margin-top: -60px; margin-bottom: 50px;">
		   <input type="Search" id="Search" name="Search" placeholder="Search..." style="height:37px; width:25%; border-radius:5px;"/>
		   <button type="submit" class="btn btn-primary" style="width:100px;">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
				<path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
			</svg>
			 Search
		   </button>
		</form>
		<div class="container-fluid px-4 px-lg-5 mt-5">
			<div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
				@foreach (var item in Model)
				{
					<div class="col mb-5">
						<div class="card h-100">
							<!-- Product image-->
							
							<div class="col-sm-10">
								<a asp-action="Details" asp-route-id="@item.BookId">

								<img src="@Url.Content("~/images/" + item.ProfilePicture)"  class=""   style="margin-left: 40px; witdh:200px; height:200px;" />
								</a>

							</div>
							<!-- Product details-->
							<div class="card-body p-4">
								<div class="text-center">
									<!-- Product name-->
									<a asp-action="Detail" asp-route-id="@item.BookId">
										<h5 class="fw-bolder">@item.BookName</h5>
									</a>
									<h6 class="fw-bolder">@item.Author</h6>
									@*<h7 class="fw-bolder">@item.Category</h7>*@
									<!-- Product price-->
								@item.Price
								</div>
							</div>
							<!-- Product actions-->
							<div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
								<div class="text-center"><button type="button" class="ajax-add-to-cart buy-now btn btn-outline-dark mt-auto" data-id="@item.BookId">Add to Cart</button></div>
							</div>
						</div>
					</div>
				}
			</div>
		</div>
	</section>
</div>

@section scripts{
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

	<script>
		$(document).ready(function () {
			$(".ajax-add-to-cart").click(function () {
				$.ajax({
					url: "/Cart/AddToCart",
					data: {
						id: $(this).data("id"),
						Quantity: 1,
						type: "ajax"
					},
					success: function (data) {
						Swal.fire({
							icon: 'success',
							title: 'Add to cart Successfullly',
							showConfirmButton: false,
							timer: 2500
						});
						console.log(data);
							$("#cart_count").html(data.quantity);
					},
					error: function () {
						Swal.fire({
							icon: 'error',
							title: 'Add to cart failed',
							text: 'Please try again',
							showConfirmButton: false,
							timer: 2500
						});
					}
				});
			});
		});
	</script>
}